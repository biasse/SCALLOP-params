from deuring.broker import starting_curve
from deuring.correspondence import constructive_deuring

p = 23771452727449498898004557547225354988120021364701398066313318892838230235651289792849929330578203612228877729959916570183072595360843544888617115522542149031138111127294471888062615222219308670025415410876727090874823170475481539518868548152615795234974491096957906735993259268864790983747139027153544490397993988855511337575848418797409297084369809840481360670399419714736596634148006572830334348569025487101216814643806207
F2.<i> = GF((p, 2), modulus=[1,0,1])

E0, iota, O0 = starting_curve(F2)

P = E0((11190367857777962071887990908966515363509895987146360585559606114906427397152913652014174235635110174129925823787263865682956179900207430869994151473307626161217406915312716292853605717884307514907202586672679073346658696273910796945271051443719021706132945996916559315085830079116854262864630913278302464924134444143777918750621698517360274285446220762688921558138550639401970939554794560403109550288883102503330595111854867*i + 15305399377133702949010449593843912955556747362232818122902188702640600106676191214438646977749104480044898166411390052352922033532076287150753893382377329273131621910975806974494065526603600284935814619252668599997318029244818641686473398265263054191028499933302943309853990299718728341444429153782354922481656530195197611401551432420498015426380937034344248545904399866367804223993015204583837254823694469426548038295409247, 16562467897122321584527773371750774272689336586949138047175602323845487191561919338299401216025363685373836029421479249663599513664162673226202930090433631369409098151646403402159427938205210919897099375962835455327276859982202216406548199202180508836598405520298679360701578107992301405078293615578618716521590813501833010604840170535139297685977235002738208483961540076290210264862755935064915967285061289499869285301265008*i + 11075363022754883139424936504402823428892863156133963569011407784063207489151173460237618332453765383881101625968833918373973708991933698235863346796382400980679594882939037605597084332373246886533600835971222523776970138885348714073781448648839169811448907353901751477824254268067081975924860709147598039720465509249037915648837257820379695662953513546334208591740828480946965927056001402822551727404356737936915093887007823))
Q = E0((5386667865356494665004862439326787229141687695407026483221149433527131686453432289736808813761432114425918885138242790102571785981633045368532018783626918936205364462760870180486975984642638123841746521193617412884244033936939293050988971984106607883894403837599580430697730808889684149583572631924956579294456773405412412209663674505245848580359321683125625899960412729444232707057786830780796980323106271092851230647610910*i + 11905553279751983888488615518207235493699981840257291248568987472992970195036664206667861806443365345343040603185698229282532646928332627995755393345855861986106127056988649246388169449417006900863311321996860930076602813820553159893465948727231402905504380311207548232546073997690197976322541559314493759541760560078244880056136476820407044589590017578518331837969231346220752619697859175966874517079911379162969148925688184, 2650585971264678779450786339159348141516806227466582916625159675544226964641690867858497356944108482173042149349390020315585204290777585201636683299122373349043139407906541558761324623859981038585169560351843158852143810949497197506318157335510153811546960298593988367436171856641017940776345455177265296039603073795614480478538379071497863150163628707352499004893993496142401751819142415688168349365685799482510031514063171*i + 91081612910542716319087647146749470618696311019211032378338249574021616901540176782339559682422072145179557801230458253489043017008927087345784600718878101554772454804949159851732277530124412805371448484557859330686821885950754294582807835945768337395229116149506122081411132227267471944682469872540284338596939475125028166525976647835616496835738567250282336639083161942139367648083794663168745807684416076804553545285710))


B = O0.quaternion_algebra()
i, j, k = B.gens()

#I_o1 = O0.left_ideal((1/2 + 1/2*i + 16462376068854649447936250355321596971725126761564132771547204315964470145725785923688254800255019005973055651742657589041295792099740220819735014443410655704989961338391074004353875330882701167108481982192961794275761887036630897/2*j + 3221588655705278186360514154788440663918707782121440000285554370727451414094118252656929593426730451536250331755659213047906921253322434549695013630709433490080737220232180912209953222533890697796529857390607750294895276649863057/2*k, i + 6620393706574685630787868100266578153903209489721346385630824972618509365815833835515662603414144277218402659993499187996694435423208893135020000406350611107454612059079446546071961054174405234655976062401177021990433305193383920*j + 9841982362279963817148382255055018817821917271842786385916379343345960779909952088172592196840874728754652991749158401044601356676531327684715014037060044597535349279311627458281914276708295932452505919791784772285328581843246977*k, 12129047596099288555851402253613301212944422008724192274523844047078523067862319424459987568973800608988185396071336509423215469094646987433158494336259227650034804500162889887111447543996862850197367181200909912116350366045437952*j + 12129047596099288555851402253613301212944422008724192274523844047078523067862319424459987568973800608988185396071336509423215469094646987433158494336259227650034804500162889887111447543996862850197367181200909912116350366045437952*k, 24258095192198577111702804507226602425888844017448384549047688094157046135724638848919975137947601217976370792142673018846430938189293974866316988672518455300069609000325779774222895087993725700394734362401819824232700732090875904*k))
#I_o2 = O0.left_ideal((1/2 + 1/2*i + 1108902483465023614872397528413120582807293330760121986931853394274333913466660858225622614242329183639735547481778258504368682685032197647201543157831081661907145701157113937900441437131705722669455591564478356303428013149190321/2*j + 40060476536200154355287732133562526922956480796899838770873981432474652088392639038344177993246528001596526764044447708924315220527011684952913133610080512728224317724455657958649904966815359667805220187682170358145563638908640849/2*k, i + 4782308165831011741495137204651899255814250284378526157076624075056887048261649758860697448445501808997975183861338293636457669268304231213461193446393739766911022988676507763848163323151898727826852064342973823311632919211150640*j + 20584689509832588985080064830987823752881887063829980378902917413374493000929649948284900303744428592618131155763112983714341951606021941300057338383955797195065731712806385948275173201973532695237337889623324357224495826028915585*k, 12129047596099288555851402253613301212944422008724192274523844047078523067862319424459987568973800608988185396071336509423215469094646987433158494336259227650034804500162889887111447543996862850197367181200909912116350366045437952*j + 12129047596099288555851402253613301212944422008724192274523844047078523067862319424459987568973800608988185396071336509423215469094646987433158494336259227650034804500162889887111447543996862850197367181200909912116350366045437952*k, 24258095192198577111702804507226602425888844017448384549047688094157046135724638848919975137947601217976370792142673018846430938189293974866316988672518455300069609000325779774222895087993725700394734362401819824232700732090875904*k))

I = O0.left_ideal((1/2 + 148517744027306236980775731157810778948711920318943987807540783716230652454126991998817343738733811348148028698509926219317522751190441122264308788716483931431089914614568165641455111020608050592475658*j + 242984351222788300942193050348357225225870083836269207547058002966214500516954773806743967376129739548314897225693549140777334730285172725935880441211266193130076180906476532964360808915185387420641049/2*k, 1/2*i + 149693651364335684515151031299529758203083734966198966244227867833479591615789768264757395647222339923105619847706762233064649002805474938505778219003657215579613028579153303678225016696525221880174401/2*j + 148517744027306236980775731157810778948711920318943987807540783716230652454126991998817343738733811348148028698509926219317522751190441122264308788716483931431089914614568165641455111020608050592475658*k, 196339001293561992728672040823943491714476909401234086895642935399847046066372271035750681511676039735710258536700155686920991866545323832220829330107461704354844604742814918321292912805855304650407725*j, 196339001293561992728672040823943491714476909401234086895642935399847046066372271035750681511676039735710258536700155686920991866545323832220829330107461704354844604742814918321292912805855304650407725*k))

#xP = constructive_deuring(I_o1, E0, iota, p)
#print(xP)
#xQ = constructive_deuring(I_o2, E0, iota, p)
#print(xQ)

E1, phi, _ = constructive_deuring(I, E0, iota, p)

print(E1)
print(phi(P))
print(phi(Q))
